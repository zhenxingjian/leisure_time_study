## 端口转发
### 起因
研究端口转发的原因，是在covid-19疫情开始之后，恰逢实验室新购置了两个台式机（我和我室友各一个），老板又允许我们暂时把主机搬回公寓方便工作，所以公寓里多了两台ubuntu主机，并一直持续了2年+。
但是由于偶尔出门，需要远程访问自己的主机，最开始用 [TeamViewer](https://www.teamviewer.com/en-us/)，用过的人都知道有多卡，根本没法用来coding。
当时的解决方案是 [ngrok](https://ngrok.com)，最后可以用ngrok ssh 远程访问主机，有点延时但是可以接受，并且直接操作命令行也比较习惯，所以用了一阵子。ngrok的痛点在于，要定期重新运行ngrok程序，并且每次重启电脑的话要重新运行，每次运行的时候，参数又不一样，只能每次先TeamViewer看一眼/打开ngrok，再ssh。

### 举例
SSH 默认端口是 22，每次输入命令 
```
ssh username@ip.address
```
的时候默认是访问22端口。但是假设主机没有公网ip地址，比如主机通过路由器分配的 192.168.1.x 网址上网，这个网址是内网地址，远程不能访问，
直接访问对应的公网ip地址的话，会直接尝试连接路由器的ssh。或者更极端的，假设在主机和路由器上都设置好了自动转发，如果一台路由器下有两个主机，路由器会不知道访问哪个主机。
这种情况下，最简单的操作就是**端口转发**。

以我自己的情况为例，我把路由器的端口 $\alpha \in [0, 65535]$ 映射到主机1 （内网ip地址 192.168.1.$x_1$）的端口 22上，并且把路由器的端口 $\beta \in [0, 65535]$ 映射到主机2 （内网ip地址 192.168.1.$x_2$）的端口 22上。
